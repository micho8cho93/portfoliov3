---
import { stripBasePath, normalizePathname } from '../utils/pathname';
import { withBase } from '../utils/withBase';
import {
  about,
  blog,
  contact,
  home,
  institutions,
  learning,
  projects,
  resources,
  routeLabels,
  teaching
} from '../lib/routes';

const currentPathname = normalizePathname(stripBasePath(Astro.url.pathname));

const navItems = [
  { route: home, label: routeLabels.home },
  { route: teaching, label: routeLabels.teaching },
  { route: learning, label: routeLabels.learning },
  { route: institutions, label: routeLabels.institutions },
  { route: projects, label: routeLabels.projects },
  { route: resources, label: routeLabels.resources },
  { route: blog, label: routeLabels.blog },
  { route: about, label: routeLabels.about },
  { route: contact, label: routeLabels.contact }
];

---

<header class="site-header">
  <nav aria-label="Main navigation" class="container nav">
    <a
      href={withBase(home)}
      class="brand"
      aria-label="CS Educator home"
      aria-current={currentPathname === home ? 'page' : undefined}
    >
      <span class="brand-name">CS Educator</span>
      <span class="brand-tagline">Computer science teaching & practical learning</span>
    </a>

    <div class="nav-groups">
      <ul>
        {navItems.map((item) => {
          const itemRoute = normalizePathname(item.route);

          return (
            <li>
              <a
                class="nav-link"
                href={withBase(itemRoute)}
                aria-current={currentPathname === itemRoute ? 'page' : undefined}
              >
                {item.label}
              </a>
            </li>
          );
        })}
      </ul>
    </div>
  </nav>
</header>
