---
import { stripBasePath, normalizePathname } from "../utils/pathname";
import { withBase } from "../utils/withBase";
import {
  home,
  blog,
  projects,
  courses,
  resources,
  contact,
  routeLabels,
} from "../lib/routes";

const currentPathname = normalizePathname(stripBasePath(Astro.url.pathname));

const navGroups = [
  {
    label: "Learn",
    items: [
      { route: courses, label: routeLabels.courses },
      { route: resources, label: routeLabels.resources },
    ],
  },
  {
    label: "Read",
    items: [{ route: blog, label: routeLabels.blog }],
  },
  {
    label: "Build",
    items: [{ route: projects, label: routeLabels.projects }],
  },
  {
    label: "Connect",
    items: [{ route: contact, label: routeLabels.contact }],
  },
];
---

<header class="site-header">
  <nav aria-label="Main navigation" class="container nav">
    <a
      href={withBase(home)}
      class="brand"
      aria-label="CS Educator home"
      aria-current={currentPathname === home ? "page" : undefined}
    >
      <span class="brand-name">CS Educator</span>
      <span class="brand-tagline"
        >Computer science teaching & practical learning</span
      >
    </a>

    <ul>
      {
        navGroups.map((group, groupIndex) => (
          <>
            <li class="nav-group-label" aria-hidden="true">
              {group.label}
            </li>
            {group.items.map((item) => {
              const itemRoute = normalizePathname(item.route);

              return (
                <li>
                  <a
                    class="nav-link"
                    href={withBase(itemRoute)}
                    aria-current={currentPathname === itemRoute ? "page" : undefined}
                  >
                    {item.label}
                  </a>
                </li>
              );
            })}
            {groupIndex !== navGroups.length - 1 && (
              <li class="nav-separator" aria-hidden="true">
                â€¢
              </li>
            )}
          </>
        ))
      }
    </ul>
  </nav>
</header>
