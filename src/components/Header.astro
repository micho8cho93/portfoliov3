---
import { stripBasePath, normalizePathname } from "../utils/pathname";
import { withBase } from "../utils/withBase";
import {
  home,
  blog,
  projects,
  courses,
  resources,
  contact,
  routeLabels,
} from "../lib/routes";

const currentPathname = normalizePathname(stripBasePath(Astro.url.pathname));

const navItems = [
  { route: courses, label: routeLabels.courses },
  { route: resources, label: routeLabels.resources },
  { route: blog, label: routeLabels.blog },
  { route: projects, label: routeLabels.projects },
  { route: contact, label: routeLabels.contact },
];
---

<header class="site-header">
  <nav aria-label="Main navigation" class="container nav">
    <a
      href={withBase(home)}
      class="brand"
      aria-label="CS Educator home"
      aria-current={currentPathname === home ? "page" : undefined}
    >
      <span class="brand-name">CS Educator</span>
      <span class="brand-tagline"
        >Computer science teaching & practical learning</span
      >
    </a>

    <ul>
      {navItems.map((item) => {
        const itemRoute = normalizePathname(item.route);

        return (
          <li>
            <a
              class="nav-link"
              href={withBase(itemRoute)}
              aria-current={currentPathname === itemRoute ? "page" : undefined}
            >
              {item.label}
            </a>
          </li>
        );
      })}
    </ul>
  </nav>
</header>
